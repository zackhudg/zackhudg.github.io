<!doctype html>
<html>
  <head>
    <title>Landing page</title>
    
  </head>

  <body>
    
  </body>

  <script>
    var myRequest = new XMLHttpRequest();
    myRequest.open("POST", "https://api.spotify.com/api/token"); // "https://mdn.github.io/fetch-examples/fetch-request/flowers.jpg"
    myRequest.setRequestHeader("content-type", "application/json");
    var myRequestBody = "{code:" + window.location.search.substr(6) + ",grant-type:authorization_code,redirect_uri:'http://zackhudg.github.io/landingPage.html'}";
    console.log(window.location.search.substr(6));
    myRequest.send(myRequestBody);
    var token = myRequest.body;
    console.log(token);

    //myRequest = new XMLHttpRequest();
    //myRequest.open("GET", "https://api.spotify.com/v1/me/albums"); // "https://mdn.github.io/fetch-examples/fetch-request/flowers.jpg"
    //myRequest.setRequestHeader("Content-Type","application/json");
    //myRequest.setRequestHeader("Authorization","Bearer " + token);
    //myRequest.send();

    myRequest.onload = function(){
      if(myRequest.status == 200){
        data = JSON.parse(myRequest.responseText);
        console.log(data);
      }else{
        console.log("nothing");
      }
    }

    

    function addToQueue(){
        request({url:"https://api.spotify.com/v1/me/albums"}, function(res,err){
            if(res){
                var albums = JSON.parse(res.body);
                console.log(albums)
            }
        });
    }

    
  </script>
</html>

